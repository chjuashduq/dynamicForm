# 快速测试指南

## 测试验证功能

### 1. 创建一个新表单
1. 点击"新增表单"
2. 输入表单名称：用户注册表单
3. 配置网格：4行2列

### 2. 添加用户名输入框
1. 点击"文本框"按钮添加控件
2. 双击控件进入编辑
3. **基本属性**：
   - 标识：username
   - 标签：用户名
4. **校验配置**（新功能）：
   - ✅ 勾选"必填项"
   - 错误提示：用户名不能为空
   - 自定义验证函数：
   ```javascript
   if (value.length < 3) {
       formAPI.showMessage('用户名长度不能少于3位', 'error');
       return false;
   }
   return true;
   ```
5. 点击确定

### 3. 添加邮箱输入框
1. 添加文本框控件
2. **基本属性**：
   - 标识：email
   - 标签：邮箱
3. **校验配置**：
   - ✅ 勾选"必填项"
   - 错误提示：邮箱不能为空
   - 自定义验证函数：
   ```javascript
   return validateEmail(value);
   ```
4. 点击确定

### 4. 添加提交按钮
1. 点击"按钮"添加控件
2. **基本属性**：
   - 标识：submitBtn
   - 标签：提交
3. **按钮动作**（新功能）：
   - 选择：提交
4. **事件配置** - 点击事件：
   ```javascript
   // 提交数据
   var submitData = {
       formId: formId,
       username: getControlValue('username'),
       email: getControlValue('email'),
       createTime: new Date().toISOString()
   };
   
   try {
       MySqlHelper.insert('users', submitData);
       showMessage('注册成功！', 'success');
       resetForm();
   } catch(e) {
       showMessage('注册失败: ' + e, 'error');
   }
   ```
5. 点击确定

### 5. 添加重置按钮
1. 添加按钮控件
2. **基本属性**：
   - 标识：resetBtn
   - 标签：重置
3. **按钮动作**：
   - 选择：重置
4. **事件配置** - 点击事件：
   ```javascript
   showMessage('表单已重置', 'info');
   ```
5. 点击确定

### 6. 保存表单配置
1. 点击"提交表单配置"
2. 表单配置已保存到数据库

### 7. 测试新增记录
1. 返回列表页面
2. 找到刚创建的"用户注册表单"
3. 点击"新增记录"按钮
4. 进入表单填写页面

### 8. 测试验证功能
**测试必填验证：**
1. 不填写任何内容，直接点击"提交"
2. 应该提示："用户名不能为空"
3. 用户名输入框应该获得焦点

**测试自定义验证：**
1. 用户名输入：ab（少于3位）
2. 点击"提交"
3. 应该提示："用户名长度不能少于3位"

**测试邮箱验证：**
1. 用户名输入：testuser
2. 邮箱输入：invalid-email
3. 点击"提交"
4. 应该提示："请输入有效的邮箱地址"

**测试成功提交：**
1. 用户名输入：testuser
2. 邮箱输入：test@example.com
3. 点击"提交"
4. 应该提示："注册成功！"
5. 表单应该自动重置

**测试重置按钮：**
1. 填写一些内容
2. 点击"重置"
3. 所有输入框应该被清空
4. 应该提示："表单已重置"

## 验证点检查清单

- [ ] ValidationPanel在编辑控件时可见（非按钮类型）
- [ ] 可以勾选"必填项"
- [ ] 可以输入错误提示信息
- [ ] 可以编写自定义验证函数
- [ ] 按钮类型显示"按钮动作"配置
- [ ] 可以选择"提交"或"重置"类型
- [ ] 提交按钮会自动执行验证
- [ ] 验证失败时显示错误提示
- [ ] 验证失败时焦点移到错误控件
- [ ] 验证通过后执行提交函数
- [ ] 提交函数可以访问formId和formData
- [ ] 重置按钮会清空所有控件
- [ ] 函数帮助对话框显示新的API

## 常见问题

### Q: 看不到ValidationPanel？
A: 确保你编辑的是输入类型的控件（text、number、dropdown等），按钮类型不显示ValidationPanel。

### Q: 提交按钮没有执行验证？
A: 检查按钮动作是否设置为"提交"类型。

### Q: 验证函数不生效？
A: 检查验证函数是否有语法错误，可以在浏览器控制台查看错误信息。

### Q: formId和formData未定义？
A: 这些变量只在按钮的点击事件中可用，确保你在按钮的事件配置中使用它们。

## 调试技巧

1. **查看控制台**：打开浏览器开发者工具，查看console.log输出
2. **使用showMessage**：在代码中添加showMessage来显示变量值
3. **检查配置**：点击"导出配置"查看完整的JSON配置
4. **测试验证函数**：在验证函数中添加console.log(value)查看当前值
