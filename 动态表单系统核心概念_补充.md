# åŠ¨æ€è¡¨å•ç³»ç»Ÿæ ¸å¿ƒæ¦‚å¿µï¼ˆè¡¥å……ç« èŠ‚ï¼‰

> æœ¬æ–‡æ¡£åŒ…å«éœ€è¦æ·»åŠ åˆ°ä¸»æ‰‹å†Œ"ç³»ç»Ÿæ¦‚è¿°"ä¹‹å‰çš„å†…å®¹

---

## ğŸ’¡ ä¸€å¥è¯æ€»ç»“

**åŠ¨æ€è¡¨å•ç³»ç»Ÿæ˜¯ä»€ä¹ˆï¼Ÿ**

åŠ¨æ€è¡¨å•ç³»ç»Ÿæ˜¯ä¸€ä¸ªé›¶ä»£ç çš„è¡¨å•é…ç½®å¹³å°ï¼Œé€šè¿‡å¯è§†åŒ–ç•Œé¢è®¾è®¡è¡¨å•å¹¶ä¿å­˜ä¸º JSON é…ç½®ï¼Œç³»ç»Ÿåœ¨è¿è¡Œæ—¶åŠ¨æ€æ¸²æŸ“è¡¨å•ç•Œé¢ï¼Œä»è€Œå°†ä¼ ç»Ÿéœ€è¦ 2-3 å¤©å¼€å‘å‘¨æœŸçš„è¡¨å•éœ€æ±‚ç¼©çŸ­è‡³ 10 åˆ†é’Ÿé…ç½®å®Œæˆï¼Œå½»åº•è§£å†³äº†è¡¨å•å¼€å‘æ•ˆç‡ä½ã€ç»´æŠ¤æˆæœ¬é«˜ã€éœ€æ±‚å“åº”æ…¢çš„é—®é¢˜ã€‚

**æ ¸å¿ƒä»·å€¼**ï¼š
- ğŸš€ **æ•ˆç‡æå‡ 80%**ï¼šä»ç¼–å†™ä»£ç åˆ°å¯è§†åŒ–é…ç½®ï¼Œ10 åˆ†é’Ÿå®Œæˆè¡¨å•è®¾è®¡
- ğŸ’° **æˆæœ¬é™ä½ 83%**ï¼šæ— éœ€ç¼–è¯‘éƒ¨ç½²ï¼Œé…ç½®å³ä¸Šçº¿ï¼ŒèŠ‚çœå¤§é‡å¼€å‘å’Œç»´æŠ¤æˆæœ¬
- âš¡ **å³æ—¶å“åº”**ï¼šéœ€æ±‚å˜æ›´æ—¶æ— éœ€å¼€å‘äººå‘˜ä»‹å…¥ï¼Œä¸šåŠ¡äººå‘˜å¯ç›´æ¥è°ƒæ•´é…ç½®
- ğŸ”§ **çµæ´»æ‰©å±•**ï¼šé€šè¿‡ JavaScript è„šæœ¬æ”¯æŒå¤æ‚ä¸šåŠ¡é€»è¾‘ï¼Œæ»¡è¶³å„ç§å®šåˆ¶éœ€æ±‚

---

## ğŸ¯ åŠ¨æ€è¡¨å•ç³»ç»Ÿè§£å†³ä»€ä¹ˆé—®é¢˜

### ä¼ ç»Ÿè¡¨å•å¼€å‘çš„ç—›ç‚¹

åœ¨ä¼ ç»Ÿçš„è½¯ä»¶å¼€å‘ä¸­ï¼Œè¡¨å•çš„åˆ›å»ºå’Œç»´æŠ¤é¢ä¸´ä»¥ä¸‹é—®é¢˜ï¼š

#### 1. å¼€å‘æˆæœ¬é«˜
- æ¯ä¸ªè¡¨å•éƒ½éœ€è¦ç¼–å†™å¤§é‡ä»£ç ï¼ˆUI + é€»è¾‘ + éªŒè¯ï¼‰
- ç®€å•çš„è¡¨å•ä¹Ÿéœ€è¦å‡ ç™¾è¡Œä»£ç 
- å¼€å‘å‘¨æœŸé•¿ï¼Œæ•ˆç‡ä½

#### 2. ç»´æŠ¤å›°éš¾
- éœ€æ±‚å˜æ›´æ—¶éœ€è¦ä¿®æ”¹ä»£ç ã€é‡æ–°ç¼–è¯‘ã€é‡æ–°éƒ¨ç½²
- ä¸€ä¸ªå­—æ®µçš„å¢åˆ æ”¹éƒ½éœ€è¦å¼€å‘äººå‘˜ä»‹å…¥
- ç‰ˆæœ¬ç®¡ç†å¤æ‚ï¼Œå®¹æ˜“å‡ºé”™

#### 3. çµæ´»æ€§å·®
- æ— æ³•å¿«é€Ÿå“åº”ä¸šåŠ¡éœ€æ±‚å˜åŒ–
- ç”¨æˆ·æ— æ³•è‡ªå®šä¹‰è¡¨å•
- æ‰©å±•æ€§å—é™

#### 4. é‡å¤åŠ³åŠ¨
- ç›¸ä¼¼çš„è¡¨å•éœ€è¦é‡å¤å¼€å‘
- éªŒè¯é€»è¾‘ã€æ•°æ®åº“æ“ä½œä»£ç é‡å¤
- æµªè´¹å¼€å‘èµ„æº

### åŠ¨æ€è¡¨å•ç³»ç»Ÿçš„è§£å†³æ–¹æ¡ˆ

```mermaid
graph LR
    A[ä¼ ç»Ÿå¼€å‘] --> B[ç¼–å†™ä»£ç ]
    B --> C[ç¼–è¯‘éƒ¨ç½²]
    C --> D[æµ‹è¯•]
    D --> E[ä¸Šçº¿]
    E --> F{éœ€æ±‚å˜æ›´?}
    F -->|æ˜¯| B
    
    G[åŠ¨æ€è¡¨å•] --> H[å¯è§†åŒ–é…ç½®]
    H --> I[ä¿å­˜é…ç½®]
    I --> J[ç«‹å³ç”Ÿæ•ˆ]
    J --> K{éœ€æ±‚å˜æ›´?}
    K -->|æ˜¯| H
    
    style A fill:#ffcccc
    style G fill:#ccffcc
    style B fill:#ffcccc
    style C fill:#ffcccc
    style D fill:#ffcccc
    style H fill:#ccffcc
    style I fill:#ccffcc
    style J fill:#ccffcc
```

#### æ ¸å¿ƒä¼˜åŠ¿

1. **é›¶ä»£ç é…ç½®**
   - é€šè¿‡å¯è§†åŒ–ç•Œé¢è®¾è®¡è¡¨å•
   - æ— éœ€ç¼–å†™ UI ä»£ç 
   - å®æ—¶é¢„è§ˆæ•ˆæœ

2. **å³æ—¶ç”Ÿæ•ˆ**
   - é…ç½®ä¿å­˜åç«‹å³å¯ç”¨
   - æ— éœ€ç¼–è¯‘å’Œéƒ¨ç½²
   - å¿«é€Ÿå“åº”éœ€æ±‚å˜åŒ–

3. **é«˜åº¦çµæ´»**
   - æ”¯æŒåŠ¨æ€æ·»åŠ /åˆ é™¤å­—æ®µ
   - è‡ªå®šä¹‰éªŒè¯è§„åˆ™
   - çµæ´»çš„äº‹ä»¶å¤„ç†

4. **é™ä½æˆæœ¬**
   - å‡å°‘ 80% çš„å¼€å‘å·¥ä½œé‡
   - é™ä½ç»´æŠ¤æˆæœ¬
   - æé«˜å¼€å‘æ•ˆç‡

---

## ğŸ“Š åŠ¨æ€è¡¨å•ç³»ç»Ÿä¸»è¦æµç¨‹

### æ•´ä½“æµç¨‹å›¾

```mermaid
flowchart TD
    Start([å¼€å§‹]) --> Design[1. è®¾è®¡è¡¨å•]
    Design --> Config[2. é…ç½®è¡¨å•]
    Config --> Save[3. ä¿å­˜é…ç½®]
    Save --> Render[4. æ¸²æŸ“è¡¨å•]
    Render --> Use[5. ä½¿ç”¨è¡¨å•]
    Use --> Data[6. æ•°æ®å­˜å‚¨]
    
    Design --> D1[å®šä¹‰è¡¨å•åç§°]
    Design --> D2[è®¾ç½®ç½‘æ ¼å¸ƒå±€]
    Design --> D3[æ·»åŠ æ§ä»¶]
    
    Config --> C1[é…ç½®æ§ä»¶å±æ€§]
    Config --> C2[è®¾ç½®éªŒè¯è§„åˆ™]
    Config --> C3[ç¼–å†™äº‹ä»¶å‡½æ•°]
    
    Save --> S1[ç”Ÿæˆ JSON é…ç½®]
    Save --> S2[å­˜å‚¨åˆ° dynamicForm è¡¨]
    
    Render --> R1[è¯»å– JSON é…ç½®]
    Render --> R2[è§£æé…ç½®]
    Render --> R3[åŠ¨æ€åˆ›å»ºæ§ä»¶]
    Render --> R4[ç»‘å®šäº‹ä»¶å’ŒéªŒè¯]
    
    Use --> U1[ç”¨æˆ·å¡«å†™æ•°æ®]
    Use --> U2[è§¦å‘éªŒè¯]
    Use --> U3[æ‰§è¡Œäº‹ä»¶å‡½æ•°]
    Use --> U4[æäº¤è¡¨å•]
    
    Data --> DA1[å­˜å‚¨åˆ° dynamicData è¡¨]
    Data --> DA2[æˆ–å­˜å‚¨åˆ°è‡ªå®šä¹‰è¡¨]
    
    style Design fill:#e1f5ff
    style Config fill:#fff4e6
    style Save fill:#f3e5f5
    style Render fill:#e8f5e9
    style Use fill:#fff9c4
    style Data fill:#fce4ec
```

### è¯¦ç»†æµç¨‹è¯´æ˜

#### é˜¶æ®µ 1ï¼šè®¾è®¡è¡¨å•

**ç›®çš„**ï¼šå®šä¹‰è¡¨å•çš„åŸºæœ¬ç»“æ„

**æ“ä½œ**ï¼š
1. è¾“å…¥è¡¨å•åç§°ï¼ˆå¦‚"ç”¨æˆ·æ³¨å†Œè¡¨å•"ï¼‰
2. è®¾ç½®ç½‘æ ¼å¸ƒå±€ï¼ˆè¡Œæ•°ã€åˆ—æ•°ã€é—´è·ï¼‰
3. ä»å·¥å…·æ æ·»åŠ æ§ä»¶ï¼ˆæ–‡æœ¬æ¡†ã€ä¸‹æ‹‰æ¡†ç­‰ï¼‰

**è¾“å‡º**ï¼šè¡¨å•çš„åŸºæœ¬æ¡†æ¶

#### é˜¶æ®µ 2ï¼šé…ç½®è¡¨å•

**ç›®çš„**ï¼šé…ç½®æ§ä»¶çš„è¯¦ç»†å±æ€§å’Œè¡Œä¸º

**æ“ä½œ**ï¼š
1. è®¾ç½®æ§ä»¶å±æ€§ï¼ˆæ ‡ç­¾ã€å ä½ç¬¦ã€é»˜è®¤å€¼ç­‰ï¼‰
2. é…ç½®éªŒè¯è§„åˆ™ï¼ˆå¿…å¡«ã€æ ¼å¼éªŒè¯ç­‰ï¼‰
3. ç¼–å†™äº‹ä»¶å‡½æ•°ï¼ˆJavaScript ä»£ç ï¼‰

**è¾“å‡º**ï¼šå®Œæ•´çš„è¡¨å•é…ç½®

#### é˜¶æ®µ 3ï¼šä¿å­˜é…ç½®

**ç›®çš„**ï¼šå°†è¡¨å•é…ç½®æŒä¹…åŒ–åˆ°æ•°æ®åº“

**æµç¨‹**ï¼š
```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant CE as ConfigEditor
    participant CM as ConfigManager
    participant DB as MySQL Database
    
    U->>CE: ç‚¹å‡»"æäº¤è¡¨å•é…ç½®"
    CE->>CM: exportConfig()
    CM->>CM: ç”Ÿæˆ JSON å­—ç¬¦ä¸²
    CM-->>CE: è¿”å› JSON
    CE->>DB: INSERT INTO dynamicForm
    Note over DB: è¡¨ç»“æ„:<br/>id, dynamicName, dynamicConfig
    DB-->>CE: ä¿å­˜æˆåŠŸ
    CE-->>U: æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
```

**æ•°æ®ç»“æ„**ï¼š
```json
{
  "grid": {
    "rows": 5,
    "columns": 2,
    "rowSpacing": 10,
    "columnSpacing": 15,
    "rowHeights": [1, 1, 1, 1, 2],
    "columnWidths": [1, 2]
  },
  "controls": [
    {
      "type": "text",
      "key": "username",
      "label": "ç”¨æˆ·å",
      "row": 0,
      "column": 0,
      "validationFunction": "if(value.length<3){return false;}",
      "events": {
        "onFocusLost": "console.log(value);"
      }
    }
  ]
}
```

#### é˜¶æ®µ 4ï¼šæ¸²æŸ“è¡¨å•

**ç›®çš„**ï¼šæ ¹æ®é…ç½®åŠ¨æ€ç”Ÿæˆè¡¨å•ç•Œé¢

**æµç¨‹**ï¼š
```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant FP as FormPreview
    participant DB as MySQL Database
    participant CF as ControlFactory
    participant FA as FormAPI
    
    U->>FP: ç‚¹å‡»"æ–°å¢è®°å½•"
    FP->>DB: SELECT dynamicConfig FROM dynamicForm
    DB-->>FP: è¿”å› JSON é…ç½®
    FP->>FP: JSON.parse(config)
    
    loop éå†æ¯ä¸ªæ§ä»¶
        FP->>CF: createControl(controlConfig)
        CF->>CF: æ ¹æ® type åˆ›å»ºæ§ä»¶å®ä¾‹
        CF->>CF: åº”ç”¨æ ·å¼å’Œå±æ€§
        CF->>CF: ç»‘å®šäº‹ä»¶å‡½æ•°
        CF->>FA: æ³¨å†Œåˆ° controlsMap
        CF-->>FP: è¿”å›æ§ä»¶å®ä¾‹
    end
    
    FP-->>U: æ˜¾ç¤ºå®Œæ•´è¡¨å•
```

**å…³é”®æŠ€æœ¯**ï¼š
- **å·¥å‚æ¨¡å¼**ï¼šæ ¹æ® type åŠ¨æ€åˆ›å»ºä¸åŒç±»å‹çš„æ§ä»¶
- **åå°„æœºåˆ¶**ï¼šé€šè¿‡é…ç½®åŠ¨æ€è®¾ç½®å±æ€§
- **äº‹ä»¶ç»‘å®š**ï¼šå°† JavaScript ä»£ç ç»‘å®šåˆ°æ§ä»¶äº‹ä»¶

#### é˜¶æ®µ 5ï¼šä½¿ç”¨è¡¨å•

**ç›®çš„**ï¼šç”¨æˆ·å¡«å†™æ•°æ®å¹¶æäº¤

**äº¤äº’æµç¨‹**ï¼š

```mermaid
stateDiagram-v2
    [*] --> å¡«å†™æ•°æ®
    å¡«å†™æ•°æ® --> å¤±å»ç„¦ç‚¹: ç¦»å¼€è¾“å…¥æ¡†
    å¤±å»ç„¦ç‚¹ --> æ‰§è¡ŒéªŒè¯: è§¦å‘éªŒè¯å‡½æ•°
    æ‰§è¡ŒéªŒè¯ --> éªŒè¯å¤±è´¥: è¿”å› false
    æ‰§è¡ŒéªŒè¯ --> éªŒè¯é€šè¿‡: è¿”å› true
    éªŒè¯å¤±è´¥ --> æ ‡ç­¾æ ‡çº¢&å¼¹çª—æç¤º
    æ ‡ç­¾æ ‡çº¢&å¼¹çª—æç¤º --> å¡«å†™æ•°æ®: ç»§ç»­å¡«å†™
    éªŒè¯é€šè¿‡ --> å¡«å†™æ•°æ®: ç»§ç»­å¡«å†™
    å¡«å†™æ•°æ® --> ç‚¹å‡»æäº¤: å®Œæˆå¡«å†™
    ç‚¹å‡»æäº¤ --> ç»Ÿä¸€éªŒè¯: validateAll()
    ç»Ÿä¸€éªŒè¯ --> éªŒè¯å¤±è´¥
    ç»Ÿä¸€éªŒè¯ --> æäº¤æ•°æ®: å…¨éƒ¨é€šè¿‡
    æäº¤æ•°æ® --> [*]
```

#### é˜¶æ®µ 6ï¼šæ•°æ®å­˜å‚¨

**ç›®çš„**ï¼šå°†ç”¨æˆ·å¡«å†™çš„æ•°æ®ä¿å­˜åˆ°æ•°æ®åº“

**å­˜å‚¨æ–¹å¼**ï¼š

**æ–¹å¼ 1ï¼šå­˜å‚¨åˆ° dynamicData è¡¨ï¼ˆé»˜è®¤ï¼‰**
```javascript
var submitData = {
    dynamicId: formId,
    data: JSON.stringify(formData),
    createTime: formatDateTime()
};
MySqlHelper.insert('dynamicData', submitData);
```

**æ–¹å¼ 2ï¼šå­˜å‚¨åˆ°è‡ªå®šä¹‰è¡¨**
```javascript
var userData = {
    username: getControlValue('username'),
    email: getControlValue('email'),
    age: getControlValue('age')
};
MySqlHelper.insert('users', userData);
```

---

## âŒ ä¸ä½¿ç”¨åŠ¨æ€è¡¨å•çš„é—®é¢˜

### ä¼ ç»Ÿå¼€å‘æµç¨‹

```mermaid
flowchart TD
    Start([éœ€æ±‚å˜æ›´]) --> A1[äº§å“ç»ç†æéœ€æ±‚]
    A1 --> A2[UI è®¾è®¡å¸ˆè®¾è®¡ç•Œé¢]
    A2 --> A3[å‰ç«¯å¼€å‘ç¼–å†™ UI ä»£ç ]
    A3 --> A4[åç«¯å¼€å‘ç¼–å†™æ¥å£]
    A4 --> A5[å‰ç«¯å¯¹æ¥æ¥å£]
    A5 --> A6[ç¼–å†™éªŒè¯é€»è¾‘]
    A6 --> A7[ç¼–å†™äº‹ä»¶å¤„ç†]
    A7 --> A8[æœ¬åœ°æµ‹è¯•]
    A8 --> A9[ä»£ç å®¡æŸ¥]
    A9 --> A10[åˆå¹¶ä»£ç ]
    A10 --> A11[ç¼–è¯‘æ‰“åŒ…]
    A11 --> A12[éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒ]
    A12 --> A13[æµ‹è¯•äººå‘˜æµ‹è¯•]
    A13 --> A14{æµ‹è¯•é€šè¿‡?}
    A14 -->|å¦| A3
    A14 -->|æ˜¯| A15[éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ]
    A15 --> A16[ç”¨æˆ·éªŒæ”¶]
    A16 --> A17{æ»¡æ„?}
    A17 -->|å¦| A1
    A17 -->|æ˜¯| End([å®Œæˆ])
    
    A3 -.->|è€—æ—¶| T1[2-3å¤©]
    A4 -.->|è€—æ—¶| T2[1-2å¤©]
    A5 -.->|è€—æ—¶| T3[1å¤©]
    A6 -.->|è€—æ—¶| T4[1å¤©]
    A7 -.->|è€—æ—¶| T5[1å¤©]
    A11 -.->|è€—æ—¶| T6[0.5å¤©]
    A12 -.->|è€—æ—¶| T7[0.5å¤©]
    A13 -.->|è€—æ—¶| T8[1-2å¤©]
    
    style Start fill:#ffcccc
    style A3 fill:#ffcccc
    style A4 fill:#ffcccc
    style A5 fill:#ffcccc
    style A6 fill:#ffcccc
    style A7 fill:#ffcccc
    style A11 fill:#ffcccc
    style A12 fill:#ffcccc
    style End fill:#ccffcc
```

**æ€»è€—æ—¶**ï¼šçº¦ 8-12 å¤©

### ä¼ ç»Ÿå¼€å‘çš„é—®é¢˜

#### 1. å¼€å‘å‘¨æœŸé•¿

```mermaid
gantt
    title ä¼ ç»Ÿå¼€å‘ vs åŠ¨æ€è¡¨å•å¼€å‘å‘¨æœŸå¯¹æ¯”
    dateFormat YYYY-MM-DD
    section ä¼ ç»Ÿå¼€å‘
    éœ€æ±‚åˆ†æ           :a1, 2025-01-01, 1d
    UI è®¾è®¡            :a2, after a1, 1d
    å‰ç«¯å¼€å‘           :a3, after a2, 3d
    åç«¯å¼€å‘           :a4, after a2, 2d
    è”è°ƒæµ‹è¯•           :a5, after a3, 2d
    éƒ¨ç½²ä¸Šçº¿           :a6, after a5, 1d
    
    section åŠ¨æ€è¡¨å•
    å¯è§†åŒ–é…ç½®         :b1, 2025-01-01, 0.5d
    æµ‹è¯•éªŒè¯           :b2, after b1, 0.5d
    ç«‹å³ä¸Šçº¿           :b3, after b2, 0d
```

#### 2. ç»´æŠ¤æˆæœ¬é«˜

**åœºæ™¯**ï¼šéœ€è¦åœ¨è¡¨å•ä¸­æ·»åŠ ä¸€ä¸ª"æ‰‹æœºå·"å­—æ®µ

**ä¼ ç»Ÿæ–¹å¼**ï¼š
```mermaid
flowchart LR
    A[éœ€æ±‚] --> B[ä¿®æ”¹ UI ä»£ç ]
    B --> C[ä¿®æ”¹æ•°æ®åº“è¡¨ç»“æ„]
    C --> D[ä¿®æ”¹åç«¯æ¥å£]
    D --> E[ä¿®æ”¹éªŒè¯é€»è¾‘]
    E --> F[é‡æ–°ç¼–è¯‘]
    F --> G[é‡æ–°éƒ¨ç½²]
    G --> H[æµ‹è¯•éªŒè¯]
    
    style A fill:#ffcccc
    style B fill:#ffcccc
    style C fill:#ffcccc
    style D fill:#ffcccc
    style E fill:#ffcccc
    style F fill:#ffcccc
    style G fill:#ffcccc
```

**åŠ¨æ€è¡¨å•æ–¹å¼**ï¼š
```mermaid
flowchart LR
    A[éœ€æ±‚] --> B[æ‰“å¼€é…ç½®ç¼–è¾‘å™¨]
    B --> C[æ·»åŠ æ‰‹æœºå·æ§ä»¶]
    C --> D[é…ç½®éªŒè¯è§„åˆ™]
    D --> E[ä¿å­˜é…ç½®]
    E --> F[ç«‹å³ç”Ÿæ•ˆ]
    
    style A fill:#ccffcc
    style B fill:#ccffcc
    style C fill:#ccffcc
    style D fill:#ccffcc
    style E fill:#ccffcc
    style F fill:#ccffcc
```

#### 3. ä»£ç é‡å¤

**ä¼ ç»Ÿæ–¹å¼**ï¼šæ¯ä¸ªè¡¨å•éƒ½éœ€è¦é‡å¤ç¼–å†™

```
ç”¨æˆ·æ³¨å†Œè¡¨å•.qml (300 è¡Œ)
â”œâ”€â”€ UI å¸ƒå±€ä»£ç  (100 è¡Œ)
â”œâ”€â”€ éªŒè¯é€»è¾‘ (80 è¡Œ)
â”œâ”€â”€ äº‹ä»¶å¤„ç† (60 è¡Œ)
â””â”€â”€ æ•°æ®æäº¤ (60 è¡Œ)

è®¢å•å½•å…¥è¡¨å•.qml (350 è¡Œ)
â”œâ”€â”€ UI å¸ƒå±€ä»£ç  (120 è¡Œ)
â”œâ”€â”€ éªŒè¯é€»è¾‘ (90 è¡Œ)
â”œâ”€â”€ äº‹ä»¶å¤„ç† (70 è¡Œ)
â””â”€â”€ æ•°æ®æäº¤ (70 è¡Œ)

å®¢æˆ·ä¿¡æ¯è¡¨å•.qml (280 è¡Œ)
â”œâ”€â”€ UI å¸ƒå±€ä»£ç  (90 è¡Œ)
â”œâ”€â”€ éªŒè¯é€»è¾‘ (70 è¡Œ)
â”œâ”€â”€ äº‹ä»¶å¤„ç† (60 è¡Œ)
â””â”€â”€ æ•°æ®æäº¤ (60 è¡Œ)

æ€»è®¡ï¼š930 è¡Œé‡å¤ä»£ç 
```

**åŠ¨æ€è¡¨å•æ–¹å¼**ï¼šå¤ç”¨æ ¸å¿ƒç»„ä»¶

```
FormPreview.qml (æ ¸å¿ƒæ¸²æŸ“å¼•æ“ï¼Œ500 è¡Œ)
ControlFactory.qml (æ§ä»¶å·¥å‚ï¼Œ300 è¡Œ)
FormAPI.qml (è¡¨å• APIï¼Œ400 è¡Œ)
ScriptEngine.qml (è„šæœ¬å¼•æ“ï¼Œ200 è¡Œ)

æ€»è®¡ï¼š1400 è¡Œæ ¸å¿ƒä»£ç ï¼Œæ”¯æŒæ— é™ä¸ªè¡¨å•
```

#### 4. çµæ´»æ€§å·®

**ä¼ ç»Ÿæ–¹å¼çš„é™åˆ¶**ï¼š
- âŒ ç”¨æˆ·æ— æ³•è‡ªå®šä¹‰è¡¨å•
- âŒ éœ€æ±‚å˜æ›´éœ€è¦å¼€å‘äººå‘˜ä»‹å…¥
- âŒ æ— æ³•å¿«é€Ÿå“åº”ä¸šåŠ¡å˜åŒ–
- âŒ æ‰©å±•æ–°åŠŸèƒ½éœ€è¦ä¿®æ”¹ä»£ç 

**åŠ¨æ€è¡¨å•çš„ä¼˜åŠ¿**ï¼š
- âœ… ç”¨æˆ·å¯ä»¥è‡ªå·±é…ç½®è¡¨å•
- âœ… ä¸šåŠ¡äººå‘˜å¯ä»¥ç›´æ¥è°ƒæ•´
- âœ… ç«‹å³å“åº”éœ€æ±‚å˜åŒ–
- âœ… é€šè¿‡é…ç½®æ‰©å±•åŠŸèƒ½

---

## ğŸ—ï¸ åŠ¨æ€è¡¨å•ç³»ç»Ÿæ€»ä½“æ¡†æ¶

### è®¾è®¡ç›®æ ‡

æœ¬ç³»ç»Ÿçš„è®¾è®¡ç›®æ ‡æ˜¯æ„å»ºä¸€ä¸ªé›¶ä»£ç ã€é«˜çµæ´»ã€æ˜“æ‰©å±•çš„è¡¨å•é…ç½®å¹³å°ï¼Œé€šè¿‡"é…ç½®å³ä»£ç "çš„ç†å¿µï¼Œè®©éæŠ€æœ¯äººå‘˜ä¹Ÿèƒ½å¿«é€Ÿåˆ›å»ºå’Œè°ƒæ•´è¡¨å•ï¼ŒåŒæ—¶ä¿è¯ç³»ç»Ÿçš„æ€§èƒ½ã€ç¨³å®šæ€§å’Œå¯ç»´æŠ¤æ€§ã€‚æ ¸å¿ƒç›®æ ‡æ˜¯å°†è¡¨å•å¼€å‘ä»"ç¼–å†™ä»£ç "è½¬å˜ä¸º"é…ç½®å‚æ•°"ï¼Œä»"ç¼–è¯‘éƒ¨ç½²"è½¬å˜ä¸º"å³æ—¶ç”Ÿæ•ˆ"ï¼Œæœ€ç»ˆå®ç°è¡¨å•éœ€æ±‚çš„å¿«é€Ÿå“åº”å’Œé›¶æˆæœ¬ç»´æŠ¤ã€‚

### æ ¸å¿ƒæ€æƒ³

**é…ç½®é©±åŠ¨ + åŠ¨æ€æ¸²æŸ“ + äº‹ä»¶é©±åŠ¨**

ç³»ç»Ÿçš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†ä¼ ç»Ÿçš„"ç¡¬ç¼–ç "å¼€å‘æ¨¡å¼è½¬å˜ä¸º"é…ç½®åŒ–"å¼€å‘æ¨¡å¼ã€‚é€šè¿‡å¯è§†åŒ–ç•Œé¢è®¾è®¡è¡¨å•å¹¶ç”Ÿæˆ JSON é…ç½®ï¼Œç³»ç»Ÿåœ¨è¿è¡Œæ—¶æ ¹æ®é…ç½®åŠ¨æ€åˆ›å»ºç•Œé¢å’Œç»‘å®šé€»è¾‘ï¼Œä»è€Œå®ç°"ä¸€æ¬¡å¼€å‘ï¼Œæ— é™å¤ç”¨"ã€‚é…ç½®é©±åŠ¨ä½¿å¾—è¡¨å•ç»“æ„å¯ä»¥çµæ´»è°ƒæ•´ï¼ŒåŠ¨æ€æ¸²æŸ“ä¿è¯äº†è¿è¡Œæ—¶çš„é«˜æ•ˆåˆ›å»ºï¼Œäº‹ä»¶é©±åŠ¨åˆ™é€šè¿‡ JavaScript è„šæœ¬æä¾›äº†å¼ºå¤§çš„ä¸šåŠ¡é€»è¾‘æ‰©å±•èƒ½åŠ›ï¼Œä¸‰è€…ç»“åˆå½¢æˆäº†ä¸€ä¸ªå®Œæ•´çš„ä½ä»£ç å¼€å‘å¹³å°ã€‚

```mermaid
graph TB
    subgraph "æ ¸å¿ƒæ€æƒ³"
        A[é…ç½®é©±åŠ¨] --> B[ä¸€åˆ‡çš†é…ç½®]
        A --> C[é…ç½®å³ä»£ç ]
        
        D[åŠ¨æ€æ¸²æŸ“] --> E[è¿è¡Œæ—¶åˆ›å»º]
        D --> F[å·¥å‚æ¨¡å¼]
        
        G[äº‹ä»¶é©±åŠ¨] --> H[JavaScript è„šæœ¬]
        G --> I[çµæ´»æ‰©å±•]
    end
    
    subgraph "å®ç°æ–¹å¼"
        B --> J[JSON é…ç½®æ–‡ä»¶]
        C --> K[å¯è§†åŒ–ç¼–è¾‘å™¨]
        
        E --> L[ControlFactory]
        F --> M[åŠ¨æ€åˆ›å»ºæ§ä»¶]
        
        H --> N[ScriptEngine]
        I --> O[è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘]
    end
    
    style A fill:#e1f5ff
    style D fill:#fff4e6
    style G fill:#f3e5f5
```

### ç³»ç»Ÿåˆ†å±‚æ¶æ„

ç³»ç»Ÿé‡‡ç”¨ç»å…¸çš„å››å±‚æ¶æ„è®¾è®¡ï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯è¡¨ç°å±‚ã€ä¸šåŠ¡é€»è¾‘å±‚ã€æ•°æ®è®¿é—®å±‚å’Œæ•°æ®å±‚ã€‚è¡¨ç°å±‚è´Ÿè´£ç”¨æˆ·äº¤äº’å’Œç•Œé¢å±•ç¤ºï¼Œä¸šåŠ¡é€»è¾‘å±‚å°è£…æ ¸å¿ƒåŠŸèƒ½å’Œä¸šåŠ¡è§„åˆ™ï¼Œæ•°æ®è®¿é—®å±‚æä¾›ç»Ÿä¸€çš„æ•°æ®æ“ä½œæ¥å£ï¼Œæ•°æ®å±‚è´Ÿè´£æ•°æ®æŒä¹…åŒ–ã€‚è¿™ç§åˆ†å±‚è®¾è®¡ä½¿å¾—å„å±‚èŒè´£æ¸…æ™°ã€è€¦åˆåº¦ä½ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚æ¯ä¸€å±‚éƒ½å¯ä»¥ç‹¬ç«‹æµ‹è¯•å’Œä¼˜åŒ–ï¼Œå½“éœ€æ±‚å˜æ›´æ—¶åªéœ€ä¿®æ”¹å¯¹åº”å±‚çš„ä»£ç ï¼Œä¸ä¼šå½±å“å…¶ä»–å±‚ï¼Œå¤§å¤§æé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚

```mermaid
graph TB
    subgraph "è¡¨ç°å±‚ Presentation Layer"
        P1[ConfigEditor<br/>é…ç½®ç¼–è¾‘å™¨]
        P2[FormPreview<br/>è¡¨å•é¢„è§ˆ]
        P3[DynamicList<br/>è¡¨å•åˆ—è¡¨]
        P4[DataRecordList<br/>æ•°æ®è®°å½•åˆ—è¡¨]
    end
    
    subgraph "ä¸šåŠ¡é€»è¾‘å±‚ Business Logic Layer"
        B1[ConfigManager<br/>é…ç½®ç®¡ç†]
        B2[ControlFactory<br/>æ§ä»¶å·¥å‚]
        B3[ScriptEngine<br/>è„šæœ¬å¼•æ“]
        B4[FormAPI<br/>è¡¨å•API]
    end
    
    subgraph "æ•°æ®è®¿é—®å±‚ Data Access Layer"
        D1[MySqlHelper<br/>æ•°æ®åº“åŠ©æ‰‹]
        D2[JSON Parser<br/>JSONè§£æå™¨]
    end
    
    subgraph "æ•°æ®å±‚ Data Layer"
        DB[(MySQL Database<br/>dynamicForm<br/>dynamicData)]
    end
    
    P1 --> B1
    P2 --> B2
    P2 --> B3
    P2 --> B4
    P3 --> D1
    P4 --> D1
    
    B1 --> D2
    B2 --> B4
    B3 --> B4
    B4 --> D1
    
    D1 --> DB
    D2 --> DB
    
    style P1 fill:#e1f5ff
    style P2 fill:#e1f5ff
    style P3 fill:#e1f5ff
    style P4 fill:#e1f5ff
    style B1 fill:#fff4e6
    style B2 fill:#fff4e6
    style B3 fill:#fff4e6
    style B4 fill:#fff4e6
    style D1 fill:#f3e5f5
    style D2 fill:#f3e5f5
    style DB fill:#e8f5e9
```

### æ ¸å¿ƒç»„ä»¶èŒè´£

```mermaid
mindmap
  root((åŠ¨æ€è¡¨å•ç³»ç»Ÿ))
    é…ç½®ç®¡ç†
      ConfigEditor
        å¯è§†åŒ–ç¼–è¾‘
        å®æ—¶é¢„è§ˆ
        é…ç½®å¯¼å‡º
      ConfigManager
        é…ç½®å¢åˆ æ”¹æŸ¥
        JSON åºåˆ—åŒ–
        çŠ¶æ€ç®¡ç†
    è¡¨å•æ¸²æŸ“
      FormPreview
        è§£æé…ç½®
        æ¸²æŸ“è¡¨å•
        æ•°æ®å¡«å……
      ControlFactory
        åŠ¨æ€åˆ›å»ºæ§ä»¶
        åº”ç”¨æ ·å¼
        ç»‘å®šäº‹ä»¶
    è„šæœ¬æ‰§è¡Œ
      ScriptEngine
        æ‰§è¡Œ JavaScript
        æä¾› API ç¯å¢ƒ
        é”™è¯¯å¤„ç†
      FormAPI
        æ§ä»¶æ“ä½œ
        æ•°æ®éªŒè¯
        çŠ¶æ€ç®¡ç†
    æ•°æ®æŒä¹…åŒ–
      MySqlHelper
        æ•°æ®åº“è¿æ¥
        CRUD æ“ä½œ
        äº‹åŠ¡ç®¡ç†
      JSON Storage
        é…ç½®å­˜å‚¨
        æ•°æ®å­˜å‚¨
```

### ç®€åŒ–åä½œå›¾

è¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„ç³»ç»Ÿåä½œæµç¨‹å›¾ï¼Œå±•ç¤ºäº†ä»è¡¨å•é…ç½®åˆ°æ•°æ®å½•å…¥çš„å®Œæ•´è¿‡ç¨‹ï¼š

```mermaid
graph LR
    A[ğŸ‘¤ ç”¨æˆ·] -->|è®¾è®¡è¡¨å•| B[ğŸ“ é…ç½®ç¼–è¾‘å™¨]
    B -->|ç”Ÿæˆ JSON| C[(æ•°æ®åº“)]
    C -->|è¯»å–é…ç½®| D[ğŸ¨ è¡¨å•æ¸²æŸ“å™¨]
    D -->|æ˜¾ç¤ºè¡¨å•| E[ğŸ‘¤ ç”¨æˆ·]
    E -->|å¡«å†™æ•°æ®| D
    D -->|æäº¤æ•°æ®| F[(æ•°æ®åº“)]
    
    style A fill:#e1f5ff
    style B fill:#fff4e6
    style C fill:#e8f5e9
    style D fill:#f3e5f5
    style E fill:#e1f5ff
    style F fill:#e8f5e9
```

**æµç¨‹è¯´æ˜**ï¼š

1. **è®¾è®¡è¡¨å•**ï¼šç”¨æˆ·é€šè¿‡å¯è§†åŒ–ç•Œé¢è®¾è®¡è¡¨å•ï¼ˆæ·»åŠ æ§ä»¶ã€é…ç½®å±æ€§ï¼‰
2. **ç”Ÿæˆ JSON**ï¼šç³»ç»Ÿå°†è¡¨å•é…ç½®åºåˆ—åŒ–ä¸º JSON å¹¶å­˜å‚¨åˆ° dynamicForm è¡¨
3. **è¯»å–é…ç½®**ï¼šéœ€è¦ä½¿ç”¨è¡¨å•æ—¶ï¼Œä»æ•°æ®åº“è¯»å– JSON é…ç½®
4. **æ˜¾ç¤ºè¡¨å•**ï¼šè¡¨å•æ¸²æŸ“å™¨æ ¹æ® JSON é…ç½®åŠ¨æ€åˆ›å»ºç•Œé¢
5. **å¡«å†™æ•°æ®**ï¼šç”¨æˆ·åœ¨åŠ¨æ€ç”Ÿæˆçš„è¡¨å•ä¸­å¡«å†™æ•°æ®
6. **æäº¤æ•°æ®**ï¼šç”¨æˆ·æ•°æ®ä»¥ JSON æ ¼å¼å­˜å‚¨åˆ° dynamicData è¡¨

### è¯¦ç»†æ•°æ®æµè½¬

```mermaid
flowchart LR
    subgraph "é…ç½®é˜¶æ®µ"
        A1[ç”¨æˆ·é…ç½®] --> A2[ConfigEditor]
        A2 --> A3[ConfigManager]
        A3 --> A4[JSON é…ç½®]
        A4 --> A5[(dynamicForm è¡¨)]
    end
    
    subgraph "æ¸²æŸ“é˜¶æ®µ"
        B1[(dynamicForm è¡¨)] --> B2[è¯»å–é…ç½®]
        B2 --> B3[JSON.parse]
        B3 --> B4[ControlFactory]
        B4 --> B5[åˆ›å»ºæ§ä»¶]
        B5 --> B6[FormPreview]
    end
    
    subgraph "ä½¿ç”¨é˜¶æ®µ"
        C1[ç”¨æˆ·è¾“å…¥] --> C2[è§¦å‘äº‹ä»¶]
        C2 --> C3[ScriptEngine]
        C3 --> C4[æ‰§è¡Œè„šæœ¬]
        C4 --> C5[FormAPI]
        C5 --> C6[éªŒè¯/æäº¤]
    end
    
    subgraph "å­˜å‚¨é˜¶æ®µ"
        D1[è¡¨å•æ•°æ®] --> D2[MySqlHelper]
        D2 --> D3[(dynamicData è¡¨)]
        D2 --> D4[(è‡ªå®šä¹‰è¡¨)]
    end
    
    A5 --> B1
    B6 --> C1
    C6 --> D1
    
    style A2 fill:#e1f5ff
    style A3 fill:#fff4e6
    style B4 fill:#fff4e6
    style C3 fill:#f3e5f5
    style C5 fill:#f3e5f5
    style D2 fill:#f3e5f5
```

### å…³é”®æŠ€æœ¯ç‚¹

#### 1. é…ç½®é©±åŠ¨

**æ ¸å¿ƒ**ï¼šå°†è¡¨å•çš„ç»“æ„ã€æ ·å¼ã€è¡Œä¸ºéƒ½æŠ½è±¡ä¸ºé…ç½®

```json
{
  "type": "text",           // æ§ä»¶ç±»å‹
  "key": "username",        // å”¯ä¸€æ ‡è¯†
  "label": "ç”¨æˆ·å",        // æ˜¾ç¤ºæ ‡ç­¾
  "placeholder": "è¯·è¾“å…¥",  // å ä½ç¬¦
  "validationFunction": "", // éªŒè¯å‡½æ•°
  "events": {}              // äº‹ä»¶å¤„ç†
}
```

**ä¼˜åŠ¿**ï¼š
- é…ç½®å³ä»£ç 
- æ˜“äºå­˜å‚¨å’Œä¼ è¾“
- æ”¯æŒç‰ˆæœ¬ç®¡ç†
- å¯ä»¥åŠ¨æ€ä¿®æ”¹

#### 2. å·¥å‚æ¨¡å¼

**æ ¸å¿ƒ**ï¼šæ ¹æ®é…ç½®åŠ¨æ€åˆ›å»ºä¸åŒç±»å‹çš„æ§ä»¶

```javascript
function createControl(config) {
    switch(config.type) {
        case "text":
            return createTextField(config);
        case "number":
            return createSpinBox(config);
        case "dropdown":
            return createComboBox(config);
        // ...
    }
}
```

**ä¼˜åŠ¿**ï¼š
- è§£è€¦åˆ›å»ºé€»è¾‘
- æ˜“äºæ‰©å±•æ–°ç±»å‹
- ç»Ÿä¸€çš„åˆ›å»ºæ¥å£

#### 3. è„šæœ¬å¼•æ“

**æ ¸å¿ƒ**ï¼šåœ¨è¿è¡Œæ—¶æ‰§è¡Œç”¨æˆ·è‡ªå®šä¹‰çš„ JavaScript ä»£ç 

```javascript
function executeFunction(funcCode, context) {
    // æ³¨å…¥ API ç¯å¢ƒ
    var formAPI = this.formAPI;
    var MySqlHelper = getMySqlHelper();
    var formData = formAPI.getAllValues();
    
    // æ‰§è¡Œç”¨æˆ·ä»£ç 
    eval(funcCode);
}
```

**ä¼˜åŠ¿**ï¼š
- çµæ´»çš„ä¸šåŠ¡é€»è¾‘
- æ— éœ€é‡æ–°ç¼–è¯‘
- æ”¯æŒå¤æ‚åœºæ™¯

#### 4. æ•°æ®ç»‘å®š

**æ ¸å¿ƒ**ï¼šé…ç½®å’Œ UI çš„åŒå‘ç»‘å®š

```qml
// é…ç½® â†’ UI
onGridConfigChanged: {
    rowsSpinBox.value = gridConfig.rows;
}

// UI â†’ é…ç½®
onValueChanged: {
    gridConfig.rows = rowsSpinBox.value;
}
```

**ä¼˜åŠ¿**ï¼š
- è‡ªåŠ¨åŒæ­¥
- å‡å°‘æ‰‹åŠ¨æ›´æ–°
- æé«˜ä¸€è‡´æ€§

---

## ğŸ“ˆ ç³»ç»Ÿä¼˜åŠ¿æ€»ç»“

### å¼€å‘æ•ˆç‡æå‡

| æŒ‡æ ‡ | ä¼ ç»Ÿå¼€å‘ | åŠ¨æ€è¡¨å• | æå‡ |
|------|---------|---------|------|
| å•ä¸ªè¡¨å•å¼€å‘æ—¶é—´ | 2-3 å¤© | 0.5 å¤© | 80% â†‘ |
| éœ€æ±‚å˜æ›´å“åº”æ—¶é—´ | 1-2 å¤© | 10 åˆ†é’Ÿ | 99% â†‘ |
| ä»£ç é‡ | 300 è¡Œ/è¡¨å• | 0 è¡Œ/è¡¨å• | 100% â†“ |
| éƒ¨ç½²æ—¶é—´ | 0.5 å¤© | 0 ç§’ | 100% â†“ |

### æˆæœ¬èŠ‚çº¦

```mermaid
pie title å¼€å‘æˆæœ¬å¯¹æ¯”ï¼ˆ10ä¸ªè¡¨å•ï¼‰
    "ä¼ ç»Ÿå¼€å‘" : 30
    "åŠ¨æ€è¡¨å•" : 5
```

**ä¼ ç»Ÿå¼€å‘**ï¼š30 äººå¤©
- UI å¼€å‘ï¼š15 äººå¤©
- åç«¯å¼€å‘ï¼š10 äººå¤©
- æµ‹è¯•éƒ¨ç½²ï¼š5 äººå¤©

**åŠ¨æ€è¡¨å•**ï¼š5 äººå¤©
- é…ç½®è¡¨å•ï¼š3 äººå¤©
- æµ‹è¯•éªŒè¯ï¼š2 äººå¤©

**èŠ‚çº¦**ï¼š25 äººå¤©ï¼ˆ83%ï¼‰

### è´¨é‡æå‡

- âœ… **ä¸€è‡´æ€§**ï¼šæ‰€æœ‰è¡¨å•ä½¿ç”¨ç»Ÿä¸€çš„ç»„ä»¶å’Œé€»è¾‘
- âœ… **å¯é æ€§**ï¼šæ ¸å¿ƒä»£ç ç»è¿‡å……åˆ†æµ‹è¯•
- âœ… **å¯ç»´æŠ¤æ€§**ï¼šé…ç½®åŒ–ç®¡ç†ï¼Œæ˜“äºç»´æŠ¤
- âœ… **å¯æ‰©å±•æ€§**ï¼šé€šè¿‡é…ç½®æ‰©å±•åŠŸèƒ½

---

**æœ¬ç« èŠ‚åº”æ’å…¥åˆ°ä¸»æ‰‹å†Œ"ç³»ç»Ÿæ¦‚è¿°"ä¹‹å‰**


---

## ğŸ’¾ æ•°æ®å­˜å‚¨ç»“æ„è¯¦è§£

### æ•°æ®åº“è¡¨ç»“æ„

ç³»ç»Ÿä½¿ç”¨ä¸¤ä¸ªæ ¸å¿ƒæ•°æ®è¡¨æ¥å­˜å‚¨è¡¨å•é…ç½®å’Œæ•°æ®ï¼š

```mermaid
erDiagram
    dynamicForm ||--o{ dynamicData : "1:N"
    
    dynamicForm {
        int id PK "ä¸»é”®ï¼Œè‡ªå¢"
        varchar dynamicName "è¡¨å•åç§°"
        JSON dynamicConfig "è¡¨å•é…ç½®JSON"
    }
    
    dynamicData {
        int id PK "ä¸»é”®ï¼Œè‡ªå¢"
        int dynamicId FK "è¡¨å•IDï¼Œå¤–é”®"
        JSON data "è¡¨å•æ•°æ®JSON"
        datetime createTime "åˆ›å»ºæ—¶é—´"
    }
```

### è¡¨å•é…ç½® JSON ç»“æ„

#### å®Œæ•´ç»“æ„ç¤ºä¾‹

```json
{
  "grid": {
    "rows": 5,
    "columns": 2,
    "rowSpacing": 10,
    "columnSpacing": 15,
    "rowHeights": [1, 1, 1, 1, 2],
    "columnWidths": [1, 2]
  },
  "controls": [
    {
      "type": "text",
      "key": "username",
      "label": "ç”¨æˆ·å",
      "placeholder": "è¯·è¾“å…¥ç”¨æˆ·å",
      "value": "",
      "row": 0,
      "column": 0,
      "rowSpan": 1,
      "colSpan": 1,
      "labelRatio": 0.3,
      "style": {
        "labelColor": "#000000",
        "labelBold": false,
        "inputColor": "#000000",
        "inputFontSize": 12
      },
      "validationFunction": "if(value.length<3){showMessage('ç”¨æˆ·åè‡³å°‘3ä¸ªå­—ç¬¦','error');return false;}",
      "events": {
        "onFocusLost": "console.log('ç”¨æˆ·å:', value);",
        "onTextChanged": ""
      }
    },
    {
      "type": "number",
      "key": "age",
      "label": "å¹´é¾„",
      "value": 18,
      "minimum": 0,
      "maximum": 150,
      "step": 1,
      "row": 1,
      "column": 0,
      "rowSpan": 1,
      "colSpan": 1,
      "validationFunction": "if(!validateNumber(value,18,65)){return false;}"
    },
    {
      "type": "dropdown",
      "key": "gender",
      "label": "æ€§åˆ«",
      "options": [
        {"label": "ç”·", "value": "male"},
        {"label": "å¥³", "value": "female"}
      ],
      "value": "male",
      "row": 2,
      "column": 0
    },
    {
      "type": "button",
      "key": "submit_btn",
      "label": "æäº¤",
      "buttonText": "æäº¤è¡¨å•",
      "buttonType": "submit",
      "row": 4,
      "column": 0,
      "colSpan": 2,
      "events": {
        "onClicked": "var validation=validateAll();if(!validation.valid){return;}var submitData={dynamicId:formId,data:JSON.stringify(formData),createTime:formatDateTime()};try{MySqlHelper.insert('dynamicData',submitData);showMessage('æäº¤æˆåŠŸ','success');resetForm();}catch(e){showMessage('æäº¤å¤±è´¥:'+e,'error');}"
      }
    }
  ]
}
```

#### é…ç½®ç»“æ„å›¾ï¼ˆæ ‘å½¢å±•ç¤ºï¼‰

```mermaid
graph TB
    Root[è¡¨å•é…ç½® JSON]
    
    Root --> Grid[grid ç½‘æ ¼é…ç½®]
    Root --> Controls[controls æ§ä»¶æ•°ç»„]
    
    Grid --> G1[rows: è¡Œæ•°]
    Grid --> G2[columns: åˆ—æ•°]
    Grid --> G3[rowSpacing: è¡Œé—´è·]
    Grid --> G4[columnSpacing: åˆ—é—´è·]
    Grid --> G5[rowHeights: è¡Œé«˜æ¯”ä¾‹æ•°ç»„]
    Grid --> G6[columnWidths: åˆ—å®½æ¯”ä¾‹æ•°ç»„]
    
    Controls --> C1[æ§ä»¶1]
    Controls --> C2[æ§ä»¶2]
    Controls --> C3[æ§ä»¶N...]
    
    C1 --> C1A[type: æ§ä»¶ç±»å‹]
    C1 --> C1B[key: å”¯ä¸€æ ‡è¯†]
    C1 --> C1C[label: æ˜¾ç¤ºæ ‡ç­¾]
    C1 --> C1D[row/column: ä½ç½®]
    C1 --> C1E[rowSpan/colSpan: è·¨åº¦]
    C1 --> C1F[style: æ ·å¼é…ç½®]
    C1 --> C1G[validationFunction: éªŒè¯å‡½æ•°]
    C1 --> C1H[events: äº‹ä»¶å¤„ç†]
    
    style Root fill:#e1f5ff
    style Grid fill:#fff4e6
    style Controls fill:#f3e5f5
    style C1 fill:#e8f5e9
```

#### é…ç½®ç»“æ„å›¾ï¼ˆæ¸…æ™°å±•ç¤ºï¼‰

```mermaid
graph LR
    subgraph "dynamicForm è¡¨è®°å½•"
        A[id: 5]
        B[dynamicName: ç”¨æˆ·æ³¨å†Œè¡¨å•]
        C[dynamicConfig: JSONå­—ç¬¦ä¸²]
    end
    
    subgraph "dynamicConfig å­—æ®µå†…å®¹"
        D[grid: ç½‘æ ¼é…ç½®]
        E[controls: æ§ä»¶æ•°ç»„]
    end
    
    subgraph "grid ç½‘æ ¼é…ç½®"
        F[rows: 5]
        G[columns: 2]
        H[rowSpacing: 10]
        I[columnSpacing: 15]
        J[rowHeights: 1,1,1,1,2]
        K[columnWidths: 1,2]
    end
    
    subgraph "controls æ§ä»¶æ•°ç»„"
        L[æ§ä»¶1: username]
        M[æ§ä»¶2: age]
        N[æ§ä»¶3: gender]
        O[æ§ä»¶4: submit_btn]
    end
    
    subgraph "æ§ä»¶1è¯¦ç»†é…ç½®"
        P[type: text]
        Q[key: username]
        R[label: ç”¨æˆ·å]
        S[row: 0, column: 0]
        T[validationFunction: JSä»£ç ]
        U[events: onFocusLost]
        FF[events: valueChange]
    end
    
    C --> D
    C --> E
    
    D --> F
    D --> G
    D --> H
    D --> I
    D --> J
    D --> K
    
    E --> L
    E --> M
    E --> N
    E --> O
    
    L --> P
    L --> Q
    L --> R
    L --> S
    L --> T
    L --> U
    L --> FF
    
    style A fill:#e1f5ff
    style B fill:#e1f5ff
    style C fill:#fff4e6
    style D fill:#f3e5f5
    style E fill:#f3e5f5
    style F fill:#e8f5e9
    style G fill:#e8f5e9
    style H fill:#e8f5e9
    style I fill:#e8f5e9
    style J fill:#e8f5e9
    style K fill:#e8f5e9
    style L fill:#fff9c4
    style M fill:#fff9c4
    style N fill:#fff9c4
    style O fill:#fff9c4
    style P fill:#fce4ec
    style Q fill:#fce4ec
    style R fill:#fce4ec
    style S fill:#fce4ec
    style T fill:#fce4ec
    style U fill:#fce4ec
    style FF fill:#fce4ec
```

### è¡¨å•æ•°æ® JSON ç»“æ„

#### å­˜å‚¨åˆ° dynamicData è¡¨

```json
{
  "id": 1,
  "dynamicId": 5,
  "data": "{\"username\":\"zhangsan\",\"age\":25,\"gender\":\"male\",\"email\":\"zhangsan@example.com\"}",
  "createTime": "2025-11-19 14:30:00"
}
```

#### data å­—æ®µè§£æåçš„ç»“æ„

```json
{
  "username": "zhangsan",
  "age": 25,
  "gender": "male",
  "email": "zhangsan@example.com",
  "phone": "13800138000",
  "address": "åŒ—äº¬å¸‚æœé˜³åŒº"
}
```

#### æ•°æ®ç»“æ„å›¾

```mermaid
graph LR
    subgraph "dynamicData è¡¨è®°å½•"
        A[id: 1]
        B[dynamicId: 5]
        C[data: JSONå­—ç¬¦ä¸²]
        D[createTime: æ—¶é—´æˆ³]
    end
    
    subgraph "data å­—æ®µå†…å®¹"
        E[username: zhangsan]
        F[age: 25]
        G[gender: male]
        H[email: xxx@example.com]
        I[phone: 138...]
        J[address: åŒ—äº¬...]
    end
    
    C --> E
    C --> F
    C --> G
    C --> H
    C --> I
    C --> J
    
    style A fill:#e1f5ff
    style B fill:#e1f5ff
    style C fill:#fff4e6
    style D fill:#e1f5ff
    style E fill:#f3e5f5
    style F fill:#f3e5f5
    style G fill:#f3e5f5
    style H fill:#f3e5f5
    style I fill:#f3e5f5
    style J fill:#f3e5f5
```


    

```mermaid
graph LR
    subgraph "dynamicForm è¡¨è®°å½•"
        A[id: 5]
        B[dynamicName: ç”¨æˆ·æ³¨å†Œè¡¨å•]
        C[dynamicConfig: JSONå­—ç¬¦ä¸²]
    end
subgraph "dynamicConfig å­—æ®µå†…å®¹"
    D[grid: ç½‘æ ¼é…ç½®]
    E[controls: æ§ä»¶æ•°ç»„]
end


    F[rows: 5]
    G[columns: 2]
    H[rowSpacing: 10]
    I[columnSpacing: 15]
    J[rowHeights: 1,1,1,1,2]
    K[columnWidths: 1,2]


subgraph "controls æ§ä»¶æ•°ç»„"
    L[æ§ä»¶1: username]
    M[æ§ä»¶2: age]
    N[æ§ä»¶3: gender]
    O[æ§ä»¶4: submit_btn]
end

subgraph "æ§ä»¶1è¯¦ç»†é…ç½®"
    P[type: text]
    Q[key: username]
    R[label: ç”¨æˆ·å]
    S[row: 0, column: 0]
    T[validationFunction: JSä»£ç ]
    U[events: onFocusLost]
    FF[events: valueChange]
end

C --> D
D --> E

D --> F
D --> G
D --> H
D --> I
D --> J
D --> K

E --> L
E --> M
E --> N
E --> O

L --> P
L --> Q
L --> R
L --> S
L --> T
L --> U
L --> FF

style A fill:#e1f5ff
style B fill:#e1f5ff
style C fill:#fff4e6
style D fill:#f3e5f5
style E fill:#f3e5f5
style F fill:#e8f5e9
style G fill:#e8f5e9
style H fill:#e8f5e9
style I fill:#e8f5e9
style J fill:#e8f5e9
style K fill:#e8f5e9
style L fill:#fff9c4
style M fill:#fff9c4
style N fill:#fff9c4
style O fill:#fff9c4
style P fill:#fce4ec
style Q fill:#fce4ec
style R fill:#fce4ec
style S fill:#fce4ec
style T fill:#fce4ec
style U fill:#fce4ec
style FF fill:#fce4ec
```



### æ•°æ®æµè½¬å®Œæ•´æµç¨‹

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant CE as ConfigEditor
    participant CM as ConfigManager
    participant DB1 as dynamicFormè¡¨
    participant FP as FormPreview
    participant CF as ControlFactory
    participant SE as ScriptEngine
    participant DB2 as dynamicDataè¡¨
    
    rect rgb(225, 245, 255)
        Note over U,DB1: é˜¶æ®µ1ï¼šé…ç½®è¡¨å•
        U->>CE: è®¾è®¡è¡¨å•
        CE->>CM: æ·»åŠ æ§ä»¶ã€é…ç½®å±æ€§
        U->>CE: ç‚¹å‡»"æäº¤é…ç½®"
        CE->>CM: exportConfig()
        CM->>CM: ç”Ÿæˆ JSON å­—ç¬¦ä¸²
        CM-->>CE: è¿”å› JSON
        CE->>DB1: INSERT INTO dynamicForm<br/>(dynamicName, dynamicConfig)
        Note over DB1: å­˜å‚¨è¡¨å•é…ç½®<br/>{"grid":{...},"controls":[...]}
        DB1-->>CE: ä¿å­˜æˆåŠŸ
    end
    
    rect rgb(255, 244, 230)
        Note over U,CF: é˜¶æ®µ2ï¼šæ¸²æŸ“è¡¨å•
        U->>FP: ç‚¹å‡»"æ–°å¢è®°å½•"
        FP->>DB1: SELECT dynamicConfig<br/>FROM dynamicForm<br/>WHERE id=?
        DB1-->>FP: è¿”å› JSON é…ç½®
        FP->>FP: JSON.parse(config)
        loop éå† controls
            FP->>CF: createControl(controlConfig)
            CF->>CF: æ ¹æ® type åˆ›å»ºæ§ä»¶
            CF-->>FP: è¿”å›æ§ä»¶å®ä¾‹
        end
        FP-->>U: æ˜¾ç¤ºå®Œæ•´è¡¨å•
    end
    
    rect rgb(243, 229, 245)
        Note over U,SE: é˜¶æ®µ3ï¼šå¡«å†™æ•°æ®
        U->>FP: è¾“å…¥æ•°æ®
        FP->>SE: è§¦å‘éªŒè¯äº‹ä»¶
        SE->>SE: æ‰§è¡Œ validationFunction
        SE-->>FP: è¿”å›éªŒè¯ç»“æœ
        FP-->>U: æ˜¾ç¤ºéªŒè¯åé¦ˆ
    end
    
    rect rgb(232, 245, 233)
        Note over U,DB2: é˜¶æ®µ4ï¼šæäº¤æ•°æ®
        U->>FP: ç‚¹å‡»"æäº¤"æŒ‰é’®
        FP->>SE: æ‰§è¡Œ onClicked äº‹ä»¶
        SE->>SE: validateAll()
        SE->>SE: æ”¶é›†è¡¨å•æ•°æ®<br/>getAllValues()
        SE->>SE: æ„é€ æäº¤æ•°æ®<br/>{dynamicId, data, createTime}
        SE->>DB2: MySqlHelper.insert('dynamicData', data)
        Note over DB2: å­˜å‚¨è¡¨å•æ•°æ®<br/>data: JSONå­—ç¬¦ä¸²
        DB2-->>SE: æ’å…¥æˆåŠŸ
        SE-->>U: æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
    end
```

### æ§ä»¶ç±»å‹é…ç½®è¯¦è§£

#### æ–‡æœ¬æ¡†ï¼ˆtextï¼‰

```json
{
  "type": "text",
  "key": "username",
  "label": "ç”¨æˆ·å",
  "placeholder": "è¯·è¾“å…¥ç”¨æˆ·å",
  "value": "",
  "row": 0,
  "column": 0,
  "rowSpan": 1,
  "colSpan": 1,
  "labelRatio": 0.3,
  "style": {
    "labelColor": "#000000",
    "labelBold": false,
    "inputColor": "#000000",
    "inputFontSize": 12
  },
  "validationFunction": "if(value.length<3){return false;}",
  "events": {
    "onFocusLost": "console.log(value);",
    "onTextChanged": ""
  }
}
```

#### æ•°å­—æ¡†ï¼ˆnumberï¼‰

```json
{
  "type": "number",
  "key": "age",
  "label": "å¹´é¾„",
  "value": 18,
  "minimum": 0,
  "maximum": 150,
  "step": 1,
  "row": 1,
  "column": 0
}
```

#### ä¸‹æ‹‰æ¡†ï¼ˆdropdownï¼‰

```json
{
  "type": "dropdown",
  "key": "gender",
  "label": "æ€§åˆ«",
  "options": [
    {"label": "ç”·", "value": "male"},
    {"label": "å¥³", "value": "female"}
  ],
  "value": "male",
  "row": 2,
  "column": 0
}
```

#### å¤é€‰æ¡†ï¼ˆcheckboxï¼‰

```json
{
  "type": "checkbox",
  "key": "hobbies",
  "label": "çˆ±å¥½",
  "direction": "horizontal",
  "options": [
    {"label": "é˜…è¯»", "value": "reading"},
    {"label": "è¿åŠ¨", "value": "sports"},
    {"label": "éŸ³ä¹", "value": "music"}
  ],
  "value": ["reading"],
  "row": 3,
  "column": 0
}
```

#### æŒ‰é’®ï¼ˆbuttonï¼‰

```json
{
  "type": "button",
  "key": "submit_btn",
  "label": "æäº¤",
  "buttonText": "æäº¤è¡¨å•",
  "buttonType": "submit",
  "row": 4,
  "column": 0,
  "colSpan": 2,
  "events": {
    "onClicked": "var validation=validateAll();if(!validation.valid){return;}MySqlHelper.insert('dynamicData',{dynamicId:formId,data:JSON.stringify(formData),createTime:formatDateTime()});showMessage('æäº¤æˆåŠŸ','success');resetForm();"
  }
}
```

### é…ç½®å­—æ®µè¯´æ˜

#### é€šç”¨å­—æ®µ

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|------|
| type | string | âœ… | æ§ä»¶ç±»å‹ | "text", "number", "dropdown" |
| key | string | âœ… | å”¯ä¸€æ ‡è¯†ç¬¦ | "username", "age" |
| label | string | âœ… | æ˜¾ç¤ºæ ‡ç­¾ | "ç”¨æˆ·å", "å¹´é¾„" |
| row | number | âœ… | æ‰€åœ¨è¡Œï¼ˆä»0å¼€å§‹ï¼‰ | 0, 1, 2 |
| column | number | âœ… | æ‰€åœ¨åˆ—ï¼ˆä»0å¼€å§‹ï¼‰ | 0, 1 |
| rowSpan | number | âŒ | è·¨è¶Šè¡Œæ•° | 1, 2ï¼ˆé»˜è®¤1ï¼‰ |
| colSpan | number | âŒ | è·¨è¶Šåˆ—æ•° | 1, 2ï¼ˆé»˜è®¤1ï¼‰ |
| value | any | âŒ | é»˜è®¤å€¼ | "", 0, "male" |
| validationFunction | string | âŒ | éªŒè¯å‡½æ•°ï¼ˆJavaScriptä»£ç ï¼‰ | "if(value.length<3){return false;}" |
| events | object | âŒ | äº‹ä»¶å¤„ç†å‡½æ•° | {"onFocusLost": "..."} |

#### æ ·å¼å­—æ®µï¼ˆstyleï¼‰

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|--------|
| labelColor | string | æ ‡ç­¾æ–‡å­—é¢œè‰² | "#000000" |
| labelBold | boolean | æ ‡ç­¾æ˜¯å¦åŠ ç²— | false |
| inputColor | string | è¾“å…¥æ¡†æ–‡å­—é¢œè‰² | "#000000" |
| inputFontSize | number | è¾“å…¥æ¡†å­—ä½“å¤§å° | 12 |

#### ç±»å‹ç‰¹å®šå­—æ®µ

**æ•°å­—æ¡†ï¼ˆnumberï¼‰**ï¼š
- minimum: æœ€å°å€¼
- maximum: æœ€å¤§å€¼
- step: æ­¥è¿›å€¼

**ä¸‹æ‹‰æ¡†ï¼ˆdropdownï¼‰**ï¼š
- options: é€‰é¡¹æ•°ç»„ `[{"label":"æ˜¾ç¤ºæ–‡æœ¬","value":"å€¼"}]`

**å¤é€‰æ¡†ï¼ˆcheckboxï¼‰**ï¼š
- options: é€‰é¡¹æ•°ç»„
- direction: å¸ƒå±€æ–¹å‘ï¼ˆ"horizontal" æˆ– "vertical"ï¼‰

**æŒ‰é’®ï¼ˆbuttonï¼‰**ï¼š
- buttonText: æŒ‰é’®æ˜¾ç¤ºæ–‡å­—
- buttonType: æŒ‰é’®ç±»å‹ï¼ˆ"submit", "reset", "normal"ï¼‰

### æ•°æ®æŸ¥è¯¢ç¤ºä¾‹

#### æŸ¥è¯¢è¡¨å•é…ç½®

```sql
-- æŸ¥è¯¢æ‰€æœ‰è¡¨å•
SELECT id, dynamicName, dynamicConfig 
FROM dynamicForm;

-- æŸ¥è¯¢ç‰¹å®šè¡¨å•
SELECT dynamicConfig 
FROM dynamicForm 
WHERE id = 5;

-- æŸ¥è¯¢è¡¨å•åç§°åŒ…å«"ç”¨æˆ·"çš„è¡¨å•
SELECT id, dynamicName 
FROM dynamicForm 
WHERE dynamicName LIKE '%ç”¨æˆ·%';
```

#### æŸ¥è¯¢è¡¨å•æ•°æ®

```sql
-- æŸ¥è¯¢æŸä¸ªè¡¨å•çš„æ‰€æœ‰æ•°æ®è®°å½•
SELECT id, data, createTime 
FROM dynamicData 
WHERE dynamicId = 5 
ORDER BY createTime DESC;

-- æŸ¥è¯¢æœ€è¿‘æäº¤çš„10æ¡è®°å½•
SELECT d.id, f.dynamicName, d.data, d.createTime
FROM dynamicData d
JOIN dynamicForm f ON d.dynamicId = f.id
ORDER BY d.createTime DESC
LIMIT 10;

-- è§£æ JSON æ•°æ®ï¼ˆMySQL 5.7+ï¼‰
SELECT 
    id,
    JSON_EXTRACT(data, '$.username') as username,
    JSON_EXTRACT(data, '$.age') as age,
    createTime
FROM dynamicData
WHERE dynamicId = 5;
```

### æ•°æ®å¤‡ä»½ä¸æ¢å¤

#### å¤‡ä»½è¡¨å•é…ç½®

```sql
-- å¯¼å‡ºè¡¨å•é…ç½®
SELECT dynamicName, dynamicConfig 
FROM dynamicForm 
INTO OUTFILE '/tmp/form_backup.json';

-- æˆ–ä½¿ç”¨ mysqldump
mysqldump -u root -p database_name dynamicForm > form_backup.sql
```

#### æ¢å¤è¡¨å•é…ç½®

```sql
-- ä»å¤‡ä»½æ¢å¤
LOAD DATA INFILE '/tmp/form_backup.json' 
INTO TABLE dynamicForm 
(dynamicName, dynamicConfig);

-- æˆ–ä½¿ç”¨ mysql
mysql -u root -p database_name < form_backup.sql
```

---

**æœ¬ç« èŠ‚åº”æ·»åŠ åˆ°ä¸»æ‰‹å†Œçš„"æ•°æ®åº“æ“ä½œ"ç« èŠ‚ä¹‹å**
