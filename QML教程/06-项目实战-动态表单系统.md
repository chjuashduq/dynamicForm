# QML é¡¹ç›®å®æˆ˜ - åŠ¨æ€è¡¨å•ç³»ç»Ÿè§£æ

## ğŸ“š ç›®å½•
1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [æ ¸å¿ƒæ¶æ„](#æ ¸å¿ƒæ¶æ„)
3. [å…³é”®æŠ€æœ¯ç‚¹](#å…³é”®æŠ€æœ¯ç‚¹)
4. [ä»£ç è¯¦è§£](#ä»£ç è¯¦è§£)
5. [å­¦ä¹ è¦ç‚¹](#å­¦ä¹ è¦ç‚¹)

---

## é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®ç®€ä»‹
åŠ¨æ€è¡¨å•ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäº QML çš„å¯è§†åŒ–è¡¨å•é…ç½®å’Œæ¸²æŸ“å¹³å°,å…è®¸ç”¨æˆ·é€šè¿‡å›¾å½¢ç•Œé¢è®¾è®¡è¡¨å•,æ— éœ€ç¼–å†™ä»£ç å³å¯åˆ›å»ºå¤æ‚çš„æ•°æ®å½•å…¥ç•Œé¢ã€‚

### æ ¸å¿ƒåŠŸèƒ½
- âœ… å¯è§†åŒ–è¡¨å•è®¾è®¡å™¨
- âœ… å¤šç§æ§ä»¶ç±»å‹æ”¯æŒ
- âœ… ç½‘æ ¼å¸ƒå±€ç³»ç»Ÿ
- âœ… äº‹ä»¶å’ŒéªŒè¯é…ç½®
- âœ… æ•°æ®åº“é›†æˆ
- âœ… è¡¨å•é¢„è§ˆå’Œæ•°æ®å½•å…¥

### æŠ€æœ¯æ ˆ
- **Qt Quick (QML) 6.5** - UI æ¡†æ¶
- **JavaScript ES6** - ä¸šåŠ¡é€»è¾‘
- **C++** - åç«¯å’Œæ•°æ®åº“
- **MySQL** - æ•°æ®æŒä¹…åŒ–

---

## æ ¸å¿ƒæ¶æ„

### 1. é¡¹ç›®ç»“æ„

```
dynamicFormQML/
â”œâ”€â”€ qml/
â”‚   â”œâ”€â”€ main.qml                    # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ config/                     # é…ç½®ç¼–è¾‘å™¨
â”‚   â”‚   â”œâ”€â”€ ConfigEditor.qml        # è¡¨å•é…ç½®ç¼–è¾‘å™¨
â”‚   â”‚   â”œâ”€â”€ DragFormBuilder.qml     # æ‹–æ‹½å¼è®¾è®¡å™¨
â”‚   â”‚   â”œâ”€â”€ PropertyPanel.qml       # å±æ€§ç¼–è¾‘é¢æ¿
â”‚   â”‚   â”œâ”€â”€ managers/               # ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ panels/                 # é¢æ¿ç»„ä»¶
â”‚   â”‚   â””â”€â”€ dialog/                 # å¯¹è¯æ¡†
â”‚   â”œâ”€â”€ render/                     # è¡¨å•æ¸²æŸ“
â”‚   â”‚   â”œâ”€â”€ FormPreview.qml         # è¡¨å•é¢„è§ˆ
â”‚   â”‚   â””â”€â”€ ControlFactory.qml      # æ§ä»¶å·¥å‚
â”‚   â”œâ”€â”€ core/                       # æ ¸å¿ƒåŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ FormAPI.qml             # è¡¨å• API
â”‚   â”‚   â””â”€â”€ ScriptEngine.qml        # è„šæœ¬å¼•æ“
â”‚   â”œâ”€â”€ dynamic/                    # åŠ¨æ€åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ dynamicList.qml         # è¡¨å•åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ dataRecordList.qml      # æ•°æ®è®°å½•åˆ—è¡¨
â”‚   â”œâ”€â”€ components/                 # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ StyledButton.qml
â”‚   â”‚   â”œâ”€â”€ StyledTextField.qml
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ Common/                     # å…¬å…±æ¨¡å—
â”‚       â”œâ”€â”€ AppStyles.qml           # å…¨å±€æ ·å¼
â”‚       â””â”€â”€ MessageManager.qml      # æ¶ˆæ¯ç®¡ç†
â”œâ”€â”€ mysql/                          # MySQL ç›¸å…³
â”‚   â”œâ”€â”€ MySqlHelper/                # æ•°æ®åº“åŠ©æ‰‹
â”‚   â””â”€â”€ MySqlConnectionManager/     # è¿æ¥ç®¡ç†
â”œâ”€â”€ form_config.json                # é»˜è®¤é…ç½®
â””â”€â”€ CMakeLists.txt                  # æ„å»ºé…ç½®
```

### 2. MVC æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              View Layer                 â”‚
â”‚  (ConfigEditor, FormPreview, etc.)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Controller Layer              â”‚
â”‚  (ControlFactory, ScriptEngine, etc.)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Model Layer                 â”‚
â”‚     (FormAPI, MySqlHelper, JSON)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Data Layer                  â”‚
â”‚          (MySQL Database)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å…³é”®æŠ€æœ¯ç‚¹

### 1. åŠ¨æ€ç»„ä»¶åˆ›å»º

**ControlFactory.qml** ä½¿ç”¨å·¥å‚æ¨¡å¼åŠ¨æ€åˆ›å»ºæ§ä»¶:

```qml
function createControl(config) {
    var input = null
    
    switch(config.type) {
        case "text":
            input = textFieldComponent.createObject(container)
            input.placeholderText = config.placeholder || ""
            input.text = config.value || ""
            break
        case "number":
            input = spinBoxComponent.createObject(container)
            input.value = config.value || 0
            break
        // ... å…¶ä»–ç±»å‹
    }
    
    return input
}
```

**å­¦ä¹ è¦ç‚¹:**
- ä½¿ç”¨ `Component` é¢„ç¼–è¯‘ç»„ä»¶æ¨¡æ¿
- ä½¿ç”¨ `createObject()` åŠ¨æ€åˆ›å»ºå®ä¾‹
- å·¥å‚æ¨¡å¼çš„åº”ç”¨

### 2. å±æ€§ç»‘å®šå’Œä¿¡å·

**ConfigEditor.qml** ä¸­çš„é…ç½®ç®¡ç†:

```qml
Loader {
    id: configManagerLoader
    source: "managers/ConfigManager.qml"
    onLoaded: {
        // ç›‘å¬é…ç½®å˜åŒ–
        item.internalConfigChanged.connect(function (newConfig) {
            // æ›´æ–°é¢„è§ˆ
            if (gridPreviewLoader.item) {
                gridPreviewLoader.item.controls = newConfig.controls
                gridPreviewLoader.item.gridConfig = newConfig.grid
                gridPreviewLoader.item.refresh()
            }
        })
    }
}
```

**å­¦ä¹ è¦ç‚¹:**
- Loader çš„å¼‚æ­¥åŠ è½½
- ä¿¡å·ä¸æ§½çš„è¿æ¥
- ç»„ä»¶é—´é€šä¿¡

### 3. JavaScript è„šæœ¬æ‰§è¡Œ

**ScriptEngine.qml** æ‰§è¡Œç”¨æˆ·è‡ªå®šä¹‰è„šæœ¬:

```qml
function executeFunction(funcCode, context) {
    try {
        // åˆ›å»ºå‡½æ•°ä¸Šä¸‹æ–‡
        var func = new Function(
            'value', 'formAPI', 'MySqlHelper', 
            'showMessage', 'formatDateTime',
            funcCode
        )
        
        // æ‰§è¡Œå‡½æ•°
        return func.call(
            null,
            context.self ? context.self.text || context.self.value : undefined,
            formAPI,
            getMySqlHelper(),
            getMessageManager().showToast,
            formatDateTime
        )
    } catch(e) {
        console.error("è„šæœ¬æ‰§è¡Œé”™è¯¯:", e)
        return false
    }
}
```

**å­¦ä¹ è¦ç‚¹:**
- åŠ¨æ€åˆ›å»º JavaScript å‡½æ•°
- ä¸Šä¸‹æ–‡æ³¨å…¥
- é”™è¯¯å¤„ç†

### 4. ç½‘æ ¼å¸ƒå±€ç³»ç»Ÿ

**GridLayout** çš„ä½¿ç”¨:

```qml
GridLayout {
    id: formGrid
    columns: formConfig.grid.columns
    rows: formConfig.grid.rows
    columnSpacing: formConfig.grid.columnSpacing
    rowSpacing: formConfig.grid.rowSpacing
    
    // åŠ¨æ€è®¾ç½®è¡Œé«˜
    property var rowHeights: formConfig.grid.rowHeights
    
    // åŠ¨æ€è®¾ç½®åˆ—å®½
    property var columnWidths: formConfig.grid.columnWidths
}
```

**å­¦ä¹ è¦ç‚¹:**
- GridLayout çš„é…ç½®
- åŠ¨æ€è¡Œé«˜åˆ—å®½
- æ§ä»¶è·¨è¡Œè·¨åˆ—

### 5. æ•°æ®æŒä¹…åŒ–

**MySqlHelper** C++ ç±»ä¸ QML äº¤äº’:

```qml
// QML ä¸­è°ƒç”¨ C++ æ–¹æ³•
function saveForm() {
    var data = {
        "dynamicConfig": JSON.stringify(formData),
        "dynamicName": formNameField.text
    }
    
    try {
        var result = MySqlHelper.insert("dynamicForm", data)
        if (result) {
            MessageManager.showToast("ä¿å­˜æˆåŠŸ", "success")
        }
    } catch(e) {
        MessageManager.showToast("ä¿å­˜å¤±è´¥: " + e, "error")
    }
}
```

**å­¦ä¹ è¦ç‚¹:**
- C++ ä¸ QML äº¤äº’
- æ•°æ®åºåˆ—åŒ–
- é”™è¯¯å¤„ç†

---

## ä»£ç è¯¦è§£

### ç¤ºä¾‹ 1: æ‹–æ‹½å¼è¡¨å•è®¾è®¡å™¨

**DragFormBuilder.qml** çš„æ ¸å¿ƒé€»è¾‘:

```qml
Item {
    id: root
    
    // è¡¨å•æ•°æ®
    property var formControls: []
    property int selectedIndex: -1
    
    // æ·»åŠ æ§ä»¶
    function addControl(type) {
        var newControl = {
            "type": type,
            "key": type + "_" + Date.now(),
            "label": getName(type),
            "row": formControls.length,
            "column": 0,
            "rowSpan": 1,
            "colSpan": 1,
            "labelRatio": 0.3
        }
        
        // æ ¹æ®ç±»å‹æ·»åŠ é»˜è®¤å±æ€§
        switch(type) {
            case "text":
            case "password":
                newControl.placeholder = "è¯·è¾“å…¥"
                newControl.value = ""
                break
            case "number":
                newControl.value = 0
                break
            // ... å…¶ä»–ç±»å‹
        }
        
        formControls.push(newControl)
        refreshView()
        selectControl(formControls.length - 1)
    }
    
    // åˆ·æ–°è§†å›¾
    function refreshView() {
        controlListView.model = formControls.length
    }
    
    // é€‰ä¸­æ§ä»¶
    function selectControl(index) {
        selectedIndex = index
        if (index >= 0 && index < formControls.length) {
            propertyPanelLoader.item.loadControl(formControls[index])
        }
    }
}
```

**å…³é”®ç‚¹:**
1. ä½¿ç”¨æ•°ç»„ç®¡ç†æ§ä»¶åˆ—è¡¨
2. åŠ¨æ€ç”Ÿæˆæ§ä»¶é…ç½®
3. é€šè¿‡ Repeater æ¸²æŸ“åˆ—è¡¨
4. å±æ€§é¢æ¿è”åŠ¨æ›´æ–°

### ç¤ºä¾‹ 2: æ§ä»¶å·¥å‚

**ControlFactory.qml** çš„åˆ›å»ºæµç¨‹:

```qml
QtObject {
    id: controlFactory
    
    // é¢„ç¼–è¯‘ç»„ä»¶
    property Component textFieldComponent: Component {
        StyledTextField {}
    }
    
    property Component spinBoxComponent: Component {
        StyledSpinBox {}
    }
    
    // åˆ›å»ºæ§ä»¶
    function createControl(config) {
        // 1. åˆ›å»ºå®¹å™¨
        var container = rowLayoutComponent.createObject(parentGrid)
        container.Layout.row = config.row
        container.Layout.column = config.column
        
        // 2. åˆ›å»ºæ ‡ç­¾
        var label = _createLabel(container, config)
        
        // 3. åˆ›å»ºè¾“å…¥æ§ä»¶
        var input = _createInput(container, config)
        
        // 4. æ³¨å†Œæ§ä»¶
        if (input) {
            var controlKey = config.key || config.label
            controlsMap[controlKey] = input
            labelsMap[controlKey] = label
            
            // 5. åº”ç”¨æ ·å¼å’Œç»‘å®šäº‹ä»¶
            _applyStyles(input, config)
            _bindEvents(input, config)
        }
    }
    
    // åˆ›å»ºè¾“å…¥æ§ä»¶
    function _createInput(container, config) {
        var input = null
        
        switch(config.type) {
            case "text":
                input = textFieldComponent.createObject(container)
                input.placeholderText = config.placeholder || ""
                input.text = config.value || ""
                break
            case "number":
                input = spinBoxComponent.createObject(container)
                input.value = config.value || 0
                break
            // ... å…¶ä»–ç±»å‹
        }
        
        return input
    }
    
    // ç»‘å®šäº‹ä»¶
    function _bindEvents(input, config) {
        if (!scriptEngine || !config.events) return
        
        // ç„¦ç‚¹ä¸¢å¤±äº‹ä»¶
        if (config.type === "text" || config.type === "password") {
            input.focusChanged.connect(function() {
                if (!input.focus && config.events.onFocusLost) {
                    // å…ˆæ‰§è¡ŒéªŒè¯
                    var validationPassed = true
                    if (config.validationFunction) {
                        var result = formAPI.validateControl(controlKey, false)
                        validationPassed = result.valid
                    }
                    
                    // éªŒè¯é€šè¿‡æ‰æ‰§è¡Œäº‹ä»¶
                    if (validationPassed) {
                        scriptEngine.executeFunction(config.events.onFocusLost, {
                            self: input
                        })
                    }
                }
            })
        }
        
        // æ–‡æœ¬å˜åŒ–äº‹ä»¶
        if (input.hasOwnProperty("textChanged") && config.events.onTextChanged) {
            input.textChanged.connect(function() {
                scriptEngine.executeFunction(config.events.onTextChanged, {
                    self: input
                })
            })
        }
    }
}
```

**å…³é”®ç‚¹:**
1. å·¥å‚æ¨¡å¼å°è£…åˆ›å»ºé€»è¾‘
2. ç»„ä»¶é¢„ç¼–è¯‘æå‡æ€§èƒ½
3. ç»Ÿä¸€çš„äº‹ä»¶ç»‘å®šæœºåˆ¶
4. éªŒè¯ä¸äº‹ä»¶çš„åè°ƒ

### ç¤ºä¾‹ 3: è¡¨å• API

**FormAPI.qml** æä¾›ç»Ÿä¸€çš„è¡¨å•æ“ä½œæ¥å£:

```qml
QtObject {
    id: formAPI
    
    property var controlsMap: ({})
    property var labelsMap: ({})
    property var controlConfigs: ({})
    
    // è·å–æ§ä»¶å€¼
    function getControlValue(key) {
        var control = controlsMap[key]
        if (!control) return null
        
        // æ ¹æ®æ§ä»¶ç±»å‹è·å–å€¼
        if (control.hasOwnProperty("text")) {
            return control.text
        } else if (control.hasOwnProperty("value")) {
            return control.value
        } else if (control.hasOwnProperty("getValue")) {
            return control.getValue()
        }
        
        return null
    }
    
    // è®¾ç½®æ§ä»¶å€¼
    function setControlValue(key, value) {
        var control = controlsMap[key]
        if (!control) return false
        
        if (control.hasOwnProperty("text")) {
            control.text = value
        } else if (control.hasOwnProperty("value")) {
            control.value = value
        }
        
        return true
    }
    
    // éªŒè¯æ‰€æœ‰æ§ä»¶
    function validateAll() {
        var allValid = true
        var invalidControls = []
        
        for (var key in controlConfigs) {
            var result = validateControl(key, false)
            if (!result.valid) {
                allValid = false
                invalidControls.push({
                    key: key,
                    message: result.message
                })
            }
        }
        
        return {
            valid: allValid,
            invalidControls: invalidControls
        }
    }
    
    // éªŒè¯å•ä¸ªæ§ä»¶
    function validateControl(key, showMessage) {
        var config = controlConfigs[key]
        if (!config || !config.validationFunction) {
            return { valid: true }
        }
        
        var value = getControlValue(key)
        var result = scriptEngine.executeFunction(
            config.validationFunction,
            { self: { text: value, value: value } }
        )
        
        // æ›´æ–°æ ‡ç­¾é¢œè‰²
        var label = labelsMap[key]
        if (label) {
            if (result === false) {
                label.color = "#ff0000"
            } else {
                label.color = config.style && config.style.labelColor ? 
                              config.style.labelColor : "#000000"
            }
        }
        
        return {
            valid: result !== false,
            message: result === false ? "éªŒè¯å¤±è´¥" : ""
        }
    }
}
```

**å…³é”®ç‚¹:**
1. ç»Ÿä¸€çš„æ§ä»¶è®¿é—®æ¥å£
2. ç±»å‹å®‰å…¨çš„å€¼è·å–
3. å®Œæ•´çš„éªŒè¯æœºåˆ¶
4. è§†è§‰åé¦ˆ(æ ‡ç­¾å˜è‰²)

---

## å­¦ä¹ è¦ç‚¹

### 1. ç»„ä»¶åŒ–è®¾è®¡

**åŸåˆ™:**
- å•ä¸€èŒè´£: æ¯ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹
- é«˜å†…èšä½è€¦åˆ: ç»„ä»¶å†…éƒ¨ç´§å¯†,ç»„ä»¶é—´æ¾æ•£
- å¯å¤ç”¨: ç»„ä»¶å¯ä»¥åœ¨ä¸åŒåœºæ™¯ä½¿ç”¨

**ç¤ºä¾‹:**
```qml
// âœ… å¥½çš„ç»„ä»¶è®¾è®¡
StyledButton {
    property string buttonType: "primary"
    property alias text: label.text
    signal clicked()
    
    // å†…éƒ¨å®ç°...
}

// âŒ ä¸å¥½çš„è®¾è®¡
Button {
    // æ··æ‚äº†å¤ªå¤šèŒè´£
    // éš¾ä»¥å¤ç”¨
}
```

### 2. æ•°æ®é©±åŠ¨

**åŸåˆ™:**
- UI ç”±æ•°æ®é©±åŠ¨
- æ•°æ®å˜åŒ–è‡ªåŠ¨æ›´æ–° UI
- é¿å…æ‰‹åŠ¨æ“ä½œ DOM

**ç¤ºä¾‹:**
```qml
// âœ… æ•°æ®é©±åŠ¨
Repeater {
    model: formControls.length
    delegate: ControlItem {
        controlData: formControls[index]
    }
}

// âŒ æ‰‹åŠ¨åˆ›å»º
// for (var i = 0; i < count; i++) {
//     var item = component.createObject(parent)
//     // æ‰‹åŠ¨è®¾ç½®å±æ€§...
// }
```

### 3. çŠ¶æ€ç®¡ç†

**åŸåˆ™:**
- é›†ä¸­ç®¡ç†çŠ¶æ€
- å•å‘æ•°æ®æµ
- å¯é¢„æµ‹çš„çŠ¶æ€å˜åŒ–

**ç¤ºä¾‹:**
```qml
Item {
    // é›†ä¸­çš„çŠ¶æ€
    property var formControls: []
    property int selectedIndex: -1
    
    // çŠ¶æ€å˜åŒ–å‡½æ•°
    function addControl(type) {
        formControls.push(newControl)
        refreshView()
    }
    
    function selectControl(index) {
        selectedIndex = index
        updatePropertyPanel()
    }
}
```

### 4. æ€§èƒ½ä¼˜åŒ–

**æŠ€å·§:**
1. ä½¿ç”¨ Loader å»¶è¿ŸåŠ è½½
2. ä½¿ç”¨ Repeater è€Œä¸æ˜¯æ‰‹åŠ¨åˆ›å»º
3. é¿å…å¤æ‚çš„å±æ€§ç»‘å®š
4. ä½¿ç”¨ Animator è€Œä¸æ˜¯ Animation
5. å¯ç”¨ layer.enabled ç¼“å­˜å¤æ‚å…ƒç´ 

**ç¤ºä¾‹:**
```qml
// âœ… å»¶è¿ŸåŠ è½½
Loader {
    id: heavyComponent
    source: "HeavyComponent.qml"
    asynchronous: true
    active: false  // éœ€è¦æ—¶æ‰åŠ è½½
}

// âœ… ä½¿ç”¨ Animator
OpacityAnimator on opacity {
    from: 0
    to: 1
    duration: 300
}
```

### 5. é”™è¯¯å¤„ç†

**åŸåˆ™:**
- é¢„æœŸé”™è¯¯è¦å¤„ç†
- ç»™ç”¨æˆ·å‹å¥½çš„æç¤º
- è®°å½•é”™è¯¯æ—¥å¿—

**ç¤ºä¾‹:**
```qml
function saveForm() {
    try {
        // éªŒè¯æ•°æ®
        if (!validateData()) {
            MessageManager.showToast("æ•°æ®éªŒè¯å¤±è´¥", "error")
            return
        }
        
        // ä¿å­˜æ•°æ®
        var result = MySqlHelper.insert("dynamicForm", data)
        
        if (result) {
            MessageManager.showToast("ä¿å­˜æˆåŠŸ", "success")
        } else {
            MessageManager.showToast("ä¿å­˜å¤±è´¥", "error")
        }
    } catch(e) {
        console.error("ä¿å­˜å¼‚å¸¸:", e)
        MessageManager.showToast("ä¿å­˜å¼‚å¸¸: " + e, "error")
    }
}
```

---

## ğŸ“ æ€»ç»“

é€šè¿‡åˆ†æåŠ¨æ€è¡¨å•ç³»ç»Ÿé¡¹ç›®,æˆ‘ä»¬å­¦ä¹ äº†:

1. **æ¶æ„è®¾è®¡**
   - MVC æ¨¡å¼çš„åº”ç”¨
   - ç»„ä»¶åŒ–è®¾è®¡
   - æ¨¡å—åŒ–å¼€å‘

2. **æ ¸å¿ƒæŠ€æœ¯**
   - åŠ¨æ€ç»„ä»¶åˆ›å»º
   - å·¥å‚æ¨¡å¼
   - ä¿¡å·ä¸æ§½
   - JavaScript é›†æˆ
   - æ•°æ®æŒä¹…åŒ–

3. **æœ€ä½³å®è·µ**
   - ä»£ç ç»„ç»‡
   - æ€§èƒ½ä¼˜åŒ–
   - é”™è¯¯å¤„ç†
   - ç”¨æˆ·ä½“éªŒ

4. **å®æˆ˜ç»éªŒ**
   - å¦‚ä½•è®¾è®¡å¤æ‚ç³»ç»Ÿ
   - å¦‚ä½•å¤„ç†ç”¨æˆ·äº¤äº’
   - å¦‚ä½•ç®¡ç†çŠ¶æ€
   - å¦‚ä½•ä¼˜åŒ–æ€§èƒ½

---

## ğŸš€ ä¸‹ä¸€æ­¥

1. **æ·±å…¥ç ”ç©¶æºç ** - ç†è§£æ¯ä¸ªæ¨¡å—çš„å®ç°ç»†èŠ‚
2. **å°è¯•ä¿®æ”¹åŠŸèƒ½** - æ·»åŠ æ–°çš„æ§ä»¶ç±»å‹æˆ–åŠŸèƒ½
3. **æ€§èƒ½ä¼˜åŒ–** - åˆ†æå’Œä¼˜åŒ–æ€§èƒ½ç“¶é¢ˆ
4. **æ‰©å±•åŠŸèƒ½** - æ·»åŠ æ›´å¤šé«˜çº§ç‰¹æ€§
5. **ç‹¬ç«‹é¡¹ç›®** - åº”ç”¨æ‰€å­¦çŸ¥è¯†å¼€å‘è‡ªå·±çš„é¡¹ç›®

---

**æ­å–œä½ å®Œæˆäº†é¡¹ç›®å®æˆ˜å­¦ä¹ !** ğŸ‰

ç»§ç»­åŠ æ²¹,æˆä¸º QML å¼€å‘é«˜æ‰‹! ğŸ’ª
